{% extends "base.html" %}
{% block title %}My Addresses | E-Shop{% endblock %}

{% block content %}
<style>
  .address-card {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    padding: 20px;
    margin-bottom: 20px;
  }
  .btn-add {
    background-color: #2874f0;
    color: white;
  }
  .btn-add:hover {
    background-color: #1f5ed8;
  }
</style>

<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3>My Addresses</h3>
    <a href="{% url 'address_create_page' %}" class="btn btn-add">+ Add New Address</a>
  </div>

  {% for address in addresses %}
  <div class="address-card">
    <h5>{{ address.receiver_name }}</h5>
    <p>{{ address.address_line }}, {{ address.city }}, {{ address.state }}, {{ address.country }}</p>
    <p><strong>Phone:</strong> {{ address.phone }}</p>
    <p><strong>Pincode:</strong> {{ address.postal_code }}</p>

    {% if address.is_default %}
      <span class="badge bg-success">Default</span>
    {% endif %}

    <div class="mt-3">
      <a href="{% url 'address_edit_page' address.id %}" class="btn btn-sm btn-outline-primary me-2">Edit</a>
      <form method="post" action="{% url 'address_delete_page' address.id %}" style="display:inline;">
        {% csrf_token %}
        <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
      </form>
    </div>
  </div>
  {% empty %}
  <div class="text-center mt-5">
    <p>No addresses found.</p>
    <a href="{% url 'address_create_page' %}" class="btn btn-primary">+ Add Address</a>
  </div>
  {% endfor %}
</div>
{% endblock %}
